<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>C Задание №3. Геометрическое упрощение линий | Картографические базы данных</title>
  <meta name="description" content="Курс лекций по генерализации пространственных данных" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="C Задание №3. Геометрическое упрощение линий | Картографические базы данных" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Курс лекций по генерализации пространственных данных" />
  <meta name="github-repo" content="tsamsonov/gen-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="C Задание №3. Геометрическое упрощение линий | Картографические базы данных" />
  
  <meta name="twitter:description" content="Курс лекций по генерализации пространственных данных" />
  

<meta name="author" content="Тимофей Самсонов" />


<meta name="date" content="2021-12-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="points-clust-work.html"/>
<link rel="next" href="lines-network-work.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>



<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Генерализация пространственных данных</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Введение</a></li>
<li class="appendix"><span><b>Задания</b></span></li>
<li class="chapter" data-level="A" data-path="points-sel-work.html"><a href="points-sel-work.html"><i class="fa fa-check"></i><b>A</b> Задание №1. Отбор точечных объектов</a>
<ul>
<li class="chapter" data-level="" data-path="points-sel-work.html"><a href="points-sel-work.html#реализация-алгоритма-settlement-spacing"><i class="fa fa-check"></i>Реализация алгоритма Settlement Spacing</a></li>
<li class="chapter" data-level="" data-path="points-sel-work.html"><a href="points-sel-work.html#реализация-модели-оценки-условной-графической-нагрузки"><i class="fa fa-check"></i>Реализация модели оценки условной графической нагрузки</a></li>
<li class="chapter" data-level="" data-path="points-sel-work.html"><a href="points-sel-work.html#отбор-населенных-пунктов-для-карты-масштаба-14-000-000"><i class="fa fa-check"></i>Отбор населенных пунктов для карты масштаба 1:4 000 000</a></li>
<li class="chapter" data-level="" data-path="points-sel-work.html"><a href="points-sel-work.html#реализация-алгоритма-взвешенной-эффективной-площади"><i class="fa fa-check"></i>Реализация алгоритма взвешенной эффективной площади</a></li>
<li class="chapter" data-level="" data-path="points-sel-work.html"><a href="points-sel-work.html#применение-алгоритма-взвешенной-эффективной-площади"><i class="fa fa-check"></i>Применение алгоритма взвешенной эффективной площади</a></li>
<li class="chapter" data-level="" data-path="points-sel-work.html"><a href="points-sel-work.html#оценка-полученных-результатов"><i class="fa fa-check"></i>Оценка полученных результатов</a></li>
<li class="chapter" data-level="" data-path="points-sel-work.html"><a href="points-sel-work.html#отчет"><i class="fa fa-check"></i>Отчет</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="points-clust-work.html"><a href="points-clust-work.html"><i class="fa fa-check"></i><b>B</b> Задание №2. Кластеризация системы расселения</a>
<ul>
<li class="chapter" data-level="" data-path="points-clust-work.html"><a href="points-clust-work.html#изучение-работы-методов-кластеризации-и-регионизации"><i class="fa fa-check"></i>Изучение работы методов кластеризации и регионизации</a></li>
<li class="chapter" data-level="" data-path="points-clust-work.html"><a href="points-clust-work.html#автоматизация-выделения-регионов-и-центроидов-кластеров"><i class="fa fa-check"></i>Автоматизация выделения регионов и центроидов кластеров</a></li>
<li class="chapter" data-level="" data-path="points-clust-work.html"><a href="points-clust-work.html#автоматизация-расчета-критериев-качества-кластеризации"><i class="fa fa-check"></i>Автоматизация расчета критериев качества кластеризации</a></li>
<li class="chapter" data-level="" data-path="points-clust-work.html"><a href="points-clust-work.html#кластеризация-системы-расселения-субъекта"><i class="fa fa-check"></i>Кластеризация системы расселения субъекта</a></li>
<li class="chapter" data-level="" data-path="points-clust-work.html"><a href="points-clust-work.html#отчет-1"><i class="fa fa-check"></i>Отчет</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html"><i class="fa fa-check"></i><b>C</b> Задание №3. Геометрическое упрощение линий</a>
<ul>
<li class="chapter" data-level="C.1" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html#теоретические-сведения"><i class="fa fa-check"></i><b>C.1</b> Теоретические сведения</a>
<ul>
<li class="chapter" data-level="C.1.1" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html#алгоритмы-генерализации"><i class="fa fa-check"></i><b>C.1.1</b> Алгоритмы генерализации</a></li>
<li class="chapter" data-level="C.1.2" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html#модифицированное-расстояние-хаусдорфа"><i class="fa fa-check"></i><b>C.1.2</b> Модифицированное расстояние Хаусдорфа</a></li>
<li class="chapter" data-level="C.1.3" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html#коэффициент-относительной-извилистости"><i class="fa fa-check"></i><b>C.1.3</b> Коэффициент относительной извилистости</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html#часть-1.-автоматизация-метода-ли-оупеншоу"><i class="fa fa-check"></i>Часть 1. Автоматизация метода Ли-Оупеншоу</a></li>
<li class="chapter" data-level="" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html#часть-2.-автоматизация-методов-оценки-геометрической-точности-и-коэффициента-относительной-извилистости"><i class="fa fa-check"></i>Часть 2. Автоматизация методов оценки геометрической точности и коэффициента относительной извилистости</a>
<ul>
<li><a href="lines-simpl-work.html#автоматизация-вычисления-модифицрованного-хаусдорфова-расстояния-mhd-оценка-геометрической-точности">Автоматизация вычисления модифицрованного Хаусдорфова расстояния <strong>MHD</strong> (оценка геометрической точности)</a></li>
<li class="chapter" data-level="" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html#автоматизация-вычисления-коэффициента-относительной-извилистости-оценка-морфологического-соответствия"><i class="fa fa-check"></i>Автоматизация вычисления коэффициента относительной извилистости (оценка морфологического соответствия)</a></li>
<li class="chapter" data-level="" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html#отчет-2"><i class="fa fa-check"></i>Отчет</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lines-simpl-work.html"><a href="lines-simpl-work.html#часть-3.-сравнение-алгоритмов-ли-оупеншоу-ванга-мюллера-дугласа-пейкера-и-висвалингам-уайатта"><i class="fa fa-check"></i>Часть 3. Сравнение алгоритмов Ли-Оупеншоу, Ванга-Мюллера, Дугласа-Пейкера и Висвалингам-Уайатта</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="lines-network-work.html"><a href="lines-network-work.html"><i class="fa fa-check"></i><b>D</b> Задание №4. Отбор элементов транспортной сети</a>
<ul>
<li class="chapter" data-level="" data-path="lines-network-work.html"><a href="lines-network-work.html#часть-1.-подготовка-исходных-данных"><i class="fa fa-check"></i>Часть 1. Подготовка исходных данных</a></li>
<li class="chapter" data-level="" data-path="lines-network-work.html"><a href="lines-network-work.html#часть-2.-создание-инструмента-геообработки-python-toolbox-для-отбора-элементов-транспортной-сети"><i class="fa fa-check"></i>Часть 2. Создание инструмента геообработки Python Toolbox для отбора элементов транспортной сети</a></li>
<li class="chapter" data-level="" data-path="lines-network-work.html"><a href="lines-network-work.html#часть-3.-создание-инструента-python-toolbox-для-оценки-относительной-графической-нагрузки-по-линейным-объектам"><i class="fa fa-check"></i>Часть 3. Создание инструента Python Toolbox для оценки относительной графической нагрузки по линейным объектам</a></li>
<li class="chapter" data-level="" data-path="lines-network-work.html"><a href="lines-network-work.html#часть-4.-создание-и-анализ-карты-транспортной-связности-районных-центров-субъекта"><i class="fa fa-check"></i>Часть 4. Создание и анализ карты транспортной связности районных центров субъекта</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="polygons-skeleton-work.html"><a href="polygons-skeleton-work.html"><i class="fa fa-check"></i><b>E</b> Задание №5. Скелетизация площадных объектов гидрографии</a>
<ul>
<li class="chapter" data-level="" data-path="polygons-skeleton-work.html"><a href="polygons-skeleton-work.html#часть-1.-подготовка-входных-данных"><i class="fa fa-check"></i>Часть 1. Подготовка входных данных</a></li>
<li class="chapter" data-level="" data-path="polygons-skeleton-work.html"><a href="polygons-skeleton-work.html#часть-2.-автоматизация-построения-скелета-фигуры"><i class="fa fa-check"></i>Часть 2. Автоматизация построения скелета фигуры</a></li>
<li class="chapter" data-level="" data-path="polygons-skeleton-work.html"><a href="polygons-skeleton-work.html#часть-3.-построение-сетевой-модели-данных"><i class="fa fa-check"></i>Часть 3. Построение сетевой модели данных</a></li>
<li class="chapter" data-level="" data-path="polygons-skeleton-work.html"><a href="polygons-skeleton-work.html#часть-4.-автоматизация-построения-срединной-оси-фигуры"><i class="fa fa-check"></i>Часть 4. Автоматизация построения срединной оси фигуры</a></li>
<li class="chapter" data-level="" data-path="polygons-skeleton-work.html"><a href="polygons-skeleton-work.html#часть-5.-построение-срединной-оси-и-описание-результатов"><i class="fa fa-check"></i>Часть 5. Построение срединной оси и описание результатов</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="ex-dem.html"><a href="ex-dem.html"><i class="fa fa-check"></i><b>F</b> Задание №6. Генерализация цифровой модели рельефа</a>
<ul>
<li class="chapter" data-level="F.1" data-path="ex-dem.html"><a href="ex-dem.html#ex-dem-data"><i class="fa fa-check"></i><b>F.1</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="F.2" data-path="ex-dem.html"><a href="ex-dem.html#ex-dem-iter"><i class="fa fa-check"></i><b>F.2</b> Автоматизация итерационного сглаживания ЦМР</a></li>
<li class="chapter" data-level="F.3" data-path="ex-dem.html"><a href="ex-dem.html#ex-dem-iter"><i class="fa fa-check"></i><b>F.3</b> Сравнение структурной генерализации и глобальной фильтрации ЦМР</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://istina.msu.ru/profile/tsamsonov/" target="blank">Тимофей Самсонов</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Картографические базы данных</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lines-simpl-work" class="section level1" number="3">
<h1><span class="header-section-number">C</span> Задание №3. Геометрическое упрощение линий</h1>
<p><strong>Цель задания</strong> — освоение методики геометрического упрощения линий.</p>
<p><strong>Аннотация</strong>. Необходимо реализовать метод Ли-Оупеншоу для генерализации линий. Для этого на языке программирования Python создается инструмент Python Toolbox, осуществляющий последовательный запуск инструментов ArcToolbox. Помимо этого релаизуются инструменты для вычисления коэффициента относительной извилистости и модифицированного расстояния Хаусдорфа. После создания инструмента необходимо сравнить результаты работы алгоритма с тем, что получается при обработке линий посредством алгоритма Дугласа-Пейкера, Ванга-Мюллера и Висвалингам-Уайатта. Задание выполняется в ГИС-пакете ArcGIS.</p>
<div id="теоретические-сведения" class="section level2" number="3.1">
<h2><span class="header-section-number">C.1</span> Теоретические сведения</h2>
<div id="алгоритмы-генерализации" class="section level3" number="3.1.1">
<h3><span class="header-section-number">C.1.1</span> Алгоритмы генерализации</h3>
<p><strong>Алгоритм Ли-Оупеншоу</strong> <span class="citation">(<a href="#ref-Li:1992jg" role="doc-biblioref">Li and Openshaw 1992</a>)</span> использует «естественный принцип», суть которого заключается в удалении деталей, размер которых менее видимой величины. Для этого на исходное множество линий накладывается регулярная сет ка ячеек с разрешением <em>d</em> Участок линии, пересекающий ячейку, имеет точку входа в нее и точку выхода. Этот участок заменяется на середину отрезка, соединяющего две данные точки. Таким образом, удаляются все изгибы, находящиеся внутри ячеек. Принцип работы алгоритма иллюстрирует Рис. <a href="lines-simpl-work.html#fig:lio">C.1</a>. Видно, что по своему поведению результирующая линия похожа на скользящее среднее.</p>
<div class="figure"><span style="display:block;" id="fig:lio"></span>
<img src="img/li-openshaw.png" alt="Принцип работы алгоритма Ли-Оупеншоу" width="50%" />
<p class="caption">
Рис. C.1: Принцип работы алгоритма Ли-Оупеншоу
</p>
</div>
<p>В основе работы <strong>алгоритма Ванга-Мюллера</strong> <span class="citation">(<a href="#ref-Wang:1998eh" role="doc-biblioref">Wang and Müller 1998</a>)</span> лежит сегментация линий на отдельные изгибы. Изгиб определяется как участок линии, на котором угол ее поворота сохраняет свой знак. Важным аспектом алгоритма является четкий алгоритм вычисления вершины изгиба, которая определяется как точка, имеющая максимальную сумму расстояний до начальной и конечной точки изгиба. Для каждого изгиба в алгоритме Ванга-Мюллера определяется его размер, изолированность, близость и схожесть с соседним изгибом. Изолированные изгибы подвергаются преувеличению. Расположенные рядом схожие изгибы объединяются в один путем слияния вершин и удаления изгиба между ними. Наконец, изгибы малого размера удаляются. Данные операции проиллюстрированы на Рис. <a href="lines-simpl-work.html#fig:wang">C.2</a>. В ArcGIS метод Ванга-Мюллера реализован в инструменте <strong>Simplify Line</strong> (режим <em>BEND_SIMPLIFY</em>).</p>
<div class="figure"><span style="display:block;" id="fig:wang"></span>
<img src="img/wang-muller.png" alt="Элементы алгоритма Ванга-Мюллера: а) удаление; б) объединение; в) преувеличение изгибов" width="100%" />
<p class="caption">
Рис. C.2: Элементы алгоритма Ванга-Мюллера: а) удаление; б) объединение; в) преувеличение изгибов
</p>
</div>
<p>Алгоритм <strong>Дугласа-Пейкера</strong> <span class="citation">(<a href="#ref-Douglas:1973if" role="doc-biblioref">Douglas and Peucker 1973</a>)</span> относится к алгоритмам редуцирования точек и основан на последовательном нахождении узлов линии, образующих максимальное отклонение от стягивающей хорды (Рис. <a href="lines-simpl-work.html#fig:douglas">C.3</a>). В ArcGIS метод Дугласа-Пейкера реализован в инструменте <strong>Simplify Line</strong> (режим <em>POINT_REMOVE</em>).</p>
<div class="figure"><span style="display:block;" id="fig:douglas"></span>
<img src="img/douglas.png" alt="Принцип работы алгоритма Дугласа-Пейкера" width="80%" />
<p class="caption">
Рис. C.3: Принцип работы алгоритма Дугласа-Пейкера
</p>
</div>
<p>Наконец, <strong>алгоритм Висвалингам-Уайатта</strong> <span class="citation">(<a href="#ref-Visvalingam:1993hx" role="doc-biblioref">Visvalingam and Whyatt 1993</a>)</span> относится к алгоритмам редуцирования точек и основан на последовательном удалении точек, углы которых образуют минимальную эффективную площадь (Рис. <a href="lines-simpl-work.html#fig:visvalingam">C.4</a>). В ArcGIS данный алгоритм представлен в модификации Жу и Джонса <span class="citation">(<a href="#ref-zhou:2005" role="doc-biblioref">Zhou and Jones 2005</a>)</span>, где каждая площадь приобретает различный вес в зависимости от пропорций угла линии и реализован в инструменте <strong>Simplify Line</strong> (режим <em>WEIGHTED_AREA</em>).</p>
<div class="figure"><span style="display:block;" id="fig:visvalingam"></span>
<img src="img/visvalingam.png" alt="Принцип работы алгоритма Висвалингам-Уайатта" width="100%" />
<p class="caption">
Рис. C.4: Принцип работы алгоритма Висвалингам-Уайатта
</p>
</div>
</div>
<div id="модифицированное-расстояние-хаусдорфа" class="section level3" number="3.1.2">
<h3><span class="header-section-number">C.1.2</span> Модифицированное расстояние Хаусдорфа</h3>
<p>Модифицированное расстояние Хаусдорфа (MHD), широко используется как метрика оценки геометрической точности линий.</p>
<p>Пусть даны два множества точек <span class="math inline">\(\mathcal{A} = \lbrace a_1,...,a_{N_a} \rbrace\)</span> и <span class="math inline">\(\mathcal{B} = \lbrace b_1,...,b_{N_b} \rbrace\)</span>. Тогда среднее расстояние между <span class="math inline">\(\mathcal{A}\)</span> и <span class="math inline">\(\mathcal{B}\)</span> может быть вычислено как <span class="math inline">\(\overline{d}(\mathcal{A},\mathcal{B}) = \frac{1}{N_a}\sum_{a \in \mathcal{A}}d(a,\mathcal{B})\)</span>, где <span class="math inline">\(d(a, \mathcal{B}) = \min_{b \in \mathcal{B}}\lVert a - b \rVert\)</span>. Аналогично, обратное расстояние между <span class="math inline">\(\mathcal{B}\)</span> и <span class="math inline">\(\mathcal{A}\)</span> вычисляется как <span class="math inline">\(\overline{d}(\mathcal{B},\mathcal{A}) = \frac{1}{N_b}\sum_{b \in \mathcal{B}}d(b,\mathcal{A})\)</span>, где <span class="math inline">\(d(b, \mathcal{A}) = \min_{a \in \mathcal{A}}\lVert b - a \rVert\)</span>.</p>
<p>Имея прямое и обратное расстоения между <span class="math inline">\(\mathcal{A}\)</span> и <span class="math inline">\(\mathcal{B}\)</span>, модифицированное расстояние Хаусдорфа MHD вычисляется как:</p>
<p><span class="math display">\[
    MHD(\mathcal{A}, \mathcal{B}) = max\big(\overline{d}(\mathcal{A},\mathcal{B}), \overline{d}(\mathcal{B},\mathcal{A})\big),
  \]</span></p>
<p>Грубо говоря, MHD есть есть максимальное из средних расстояний от <span class="math inline">\(\mathcal{A}\)</span> к <span class="math inline">\(\mathcal{B}\)</span> и от <span class="math inline">\(\mathcal{B}\)</span> к <span class="math inline">\(\mathcal{A}\)</span>. Чем меньше значение MHD, тем интегрально ближе <span class="math inline">\(\mathcal{A}\)</span> и <span class="math inline">\(\mathcal{B}\)</span> друг к другу. Введение этой метрики вдохновлено классическим расстоянием Хаусдорфа (в котором <span class="math inline">\(d(\mathcal{A},\mathcal{B}) = max_{a \in \mathcal{A}} d(a,\mathcal{B})\)</span>), которое, как видно из определения, чувствительно к точкам-выбросам, поскольку использует максимальное расстояние вместо среднего.</p>
<p>При оценке геометрической точности в качестве множеств <span class="math inline">\(\mathcal{A}\)</span> и <span class="math inline">\(\mathcal{B}\)</span> используются ребра исходного и генерализованного множеств линий соответственно.</p>
</div>
<div id="коэффициент-относительной-извилистости" class="section level3" number="3.1.3">
<h3><span class="header-section-number">C.1.3</span> Коэффициент относительной извилистости</h3>
<p><strong>Коэффициент извилистости</strong> — мера извилистости объекта, вычисляемая как отношение длины линии к длине отрезка, соединяющего ее концы. Пусть линия <span class="math inline">\(L\)</span> состоит из <span class="math inline">\(n\)</span> узлов, соединенных ребрами. Тогда коэффициент ее извилистости будет равен:</p>
<p><span class="math display">\[K = \frac{\sum_{i=1}^{n-1} l_{i, i+1}}{l_{1,n}}\]</span></p>
<p>где <span class="math inline">\(l_{i,k}\)</span> — Евклидово расстояние между i-м и k-м узлом линии.</p>
<p>Коэффициент извилистости зависит от конфигурации сглаживающей, описывающей общую траекторию линии. В предельном случае, когда имеют дело с замкнутой фигурой, величина <span class="math inline">\(К\)</span> не определена, т.к. длина стягивающей хорды равняется нулю. Чтобы избежать этого, можно вычислить отношение длины линии не к стягивающей, а к сглаживающей, т.е. вычислить <em>относительную извилистость</em>. Для этого можно сегментировать линию одним из двух способов: либо сдвигаться на одинаковое значение стягивающей хорды, либо сдвигаться вдоль самой линии с равным шагом. Второй подход вычислительно более эффективен, так как он не требует поиска пересечения с окружностью, а также поиска следующей по ходу линии точки (пересечений может быть несколько в случае извилистой линии). Коэффициент относительной извилистости, вычисляемый при таком подходе, имеет следующий вид:</p>
<p><span class="math display">\[\overline{K} = \frac{\sum_{j=1}^{m} K_j}{m}\]</span></p>
<p>где <span class="math inline">\(K_j\)</span> — коэффициент извилистости для <span class="math inline">\(k\)</span>-го сегмента линии, <span class="math inline">\(m\)</span> — число сегментов.</p>
<div class="figure"><span style="display:block;" id="fig:sinuosity"></span>
<img src="img/sinuosity.png" alt="Подходы к вычислению коэффициента относительной извилистости: а) с фиксированной длиной стягивающей хорды; б) с фиксированной длиной сегмента линии" width="100%" />
<p class="caption">
Рис. C.5: Подходы к вычислению коэффициента относительной извилистости: а) с фиксированной длиной стягивающей хорды; б) с фиксированной длиной сегмента линии
</p>
</div>
<blockquote>
<p>При вычислении относительной извилистости средствами ГИС разбиение линии на сегменты можно заменить разрезанием линии регулярной сеткой ячеек. В этом случае коэффициент <span class="math inline">\(K_j\)</span> будет вычисляться для сегмента линии, попавшего в <span class="math inline">\(j\)</span>-й квадрат.</p>
</blockquote>
</div>
</div>
<div id="часть-1.-автоматизация-метода-ли-оупеншоу" class="section level2 unnumbered">
<h2>Часть 1. Автоматизация метода Ли-Оупеншоу</h2>
<ol style="list-style-type: decimal">
<li><p>Создайте базу геоданных для результатов генерализации и назначьте ее базой данных по умолчанию для размещения результатов пространственного анализа.</p></li>
<li><p>Проделайте следующую последовательность операций (жирным шрифтом указаны названия инструментов):</p>
<ol style="list-style-type: lower-alpha">
<li><p>Постройте вокруг исходных линий буфер (<strong>Buffer</strong>), размер которого равен разрешению генерализации (3000 м). В качестве исходных линий используйте слой <strong>Island</strong> в базе геоданных <strong>Test</strong>.</p></li>
<li><p>Создать сетку (<strong>Create Fishnet</strong>). В качестве образца экстента используйте полученный буфер. Для тестирования используйте размер сетки 3000 м. Тип сетки должен быть полигональный.</p></li>
<li><p>Найти пересечение сетки и исходных линий (<strong>Identity</strong>). Cлоем источника должен быть слой генерализуемых линий. Слоем <em>Identity</em> — сетка.</p></li>
<li><p>Превратить линии из составных в обычные (<strong>Multipart to Singlepart</strong>).</p></li>
<li><p>Найти точки линий, лежащие на границах ячеек (<strong>Feature Vertices to Points</strong>, режим BOTH_ENDS).</p></li>
<li><p>Восстановить отрезки, соединяющие эти точки (<strong>Points to Line</strong>), используя идентификатор отрезка (ORIG_FID).</p></li>
<li><p>Найти середины отрезков, полученных на шаге e) (<strong>Feature Vertices to Points</strong>, режим MIDPOINT).</p></li>
<li><p>Восстановить линию из отрезков, полученных на шаге е) (<strong>Unsplit Line</strong>).</p></li>
<li><p>Разрезать эту линию серединами, полученными на шаге f) (<strong>Split Line At Point</strong>, допуск по расстоянию 100 м).</p></li>
<li><p>Превратить разрезанные линии из составных в обычные (<strong>Multipart to Singlepart</strong>).</p></li>
<li><p>Найти конечные точки полученных сегментов линий (<strong>Feature Vertices to Points</strong>, режим BOTH_ENDS).</p></li>
<li><p>Восстановить отрезки, соединяющие эти точки (<strong>Points to Line</strong>), используя идентификатор отрезка ORIG_FID.</p></li>
<li><p>Восстановить линию из отрезков (<strong>Unsplit Line</strong>).</p></li>
</ol>
<blockquote>
<p><em>Примечание</em>: <em>шаги g) – j) нужны для того, чтобы середины соседних отрезков, полученные на шаге f) приобрели общий идентификатор для их соединения</em>.</p>
</blockquote></li>
<li><p>Создайте набор инструментов Python Toolbox “Line Simplification”.</p></li>
<li><p>Реализуйте последовательность действий, выполненную на шаге 2, в виде инструмента геообработки LiOpenshaw.</p></li>
<li><p>Вынесите в качестве параметров инструмента следующие объекты:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Входной слой линий</p></li>
<li><p>Разрешение сетки по X</p></li>
<li><p>Разрешение сетки по Y</p></li>
<li><p>Экстент сетки</p></li>
<li><p>Выходной слой линий</p></li>
</ol></li>
<li><p>Убедитесь, что для остальных параметров в инструмента стоит опция <em>Intermediate</em> (промежуточный).</p></li>
<li><p>Протестируйте инструмент на слое <strong>Island</strong>, используя разное разрешение (2-10 км)</p></li>
<li><p>Изложите ваш опыт создания инструмента в отчете, включая интерпретацию метода Ли-Оупеншоу в терминах инструмента геообработки, процесс создания инструмента и оформления его параметров. Проиллюстрируйте текст снимками экрана.</p></li>
</ol>
</div>
<div id="часть-2.-автоматизация-методов-оценки-геометрической-точности-и-коэффициента-относительной-извилистости" class="section level2 unnumbered">
<h2>Часть 2. Автоматизация методов оценки геометрической точности и коэффициента относительной извилистости</h2>
<div id="автоматизация-вычисления-модифицрованного-хаусдорфова-расстояния-mhd-оценка-геометрической-точности" class="section level3 unnumbered">
<h3>Автоматизация вычисления модифицрованного Хаусдорфова расстояния <strong>MHD</strong> (оценка геометрической точности)</h3>
<p>Инструмент Python Toolbox <em>Modified</em> <em>Hausdorff Distance</em> должty включать следующие этапы.</p>
<ol style="list-style-type: decimal">
<li><p>Конвертируйте исходную линию в точки (<strong>Feature vertices to points</strong>).</p></li>
<li><p>Добавьте в таблицу поле ID, запишите в него значение OBJECTID (<strong>Add Field, Calculate Field</strong>)</p></li>
<li><p>Добавьте в таблицу поле Sort, запишите в него значение 0 (<strong>Add Field, Calculate Field</strong>). Это будут <em>начальные</em> точки векторов смещения.</p></li>
<li><p>Вычислите расстояние от полученных точек до генерализованной линии (<strong>Near</strong>, с установленной опцией <em>Location</em>). Помимо расстояний, полученный слой будет содержать также координаты ближайшей точки.</p></li>
<li><p>Конвертируйте таблицу в точечный слой на основе полученных координат (<strong>Make XY Event Layer</strong>). Это будут <em>конечные</em> точки векторов смещения.</p></li>
<li><p>Замените значения поля <em>Sort</em> в полученном слое на 1 (<strong>Calculate Field)</strong>.</p></li>
<li><p>Добавьте содержимое полученного слоя к точечному классу, содержащему исходные точки (<strong>Append</strong>).</p></li>
<li><p>Конвертируйте полученные точки в линии векторов смещения (<strong>Points to Line</strong>). В качестве Line Field используйте поле ID, в качестве Sort Field – поле Sort.</p></li>
<li><p>Визуализируйте полученный слой стрелками как на Рис. <a href="lines-simpl-work.html#fig:shift">C.6</a>.</p>
<div class="figure"><span style="display:block;" id="fig:shift"></span>
<img src="img/shift-vectors.png" alt="Пример визуализации векторов смещения линии" width="100%" />
<p class="caption">
Рис. C.6: Пример визуализации векторов смещения линии
</p>
</div>
<p><!-- > Чтобы символика присваивалась автоматически по результатам выполнения модели геообработки, необходимо заготовить файл \*.lyr и положить его в туже папку, что и ваша модель. Далее в свойствах итогового класса объектов в Model Builder укажите созданный файл на вкладке *Layer Symbology*. --></p></li>
<li><p>Вычислите среднее расстояние от исходной линии до генерализованной путем осреднения поля <em>Shape_Length</em> (<strong>Summary Statistics</strong>)</p></li>
<li><p>Вычислите аналогичным образом обратное расстояние (для этого потребуется генерализованную линию превратить в точки).</p></li>
<li><p>Получите Модифицированное Хаусдорфово расстояние путем нахождения максимума из полученных значений (<strong>Calculate Value</strong>). Чтобы извлечь значения, используйте функцию <strong>Get Field Value.</strong></p></li>
</ol>
<p>Инструмент должен включать следующие параметры:</p>
<ul>
<li><p>Исходные линии</p></li>
<li><p>Генерализованные линии</p></li>
<li><p>Выходной класс векторов смещения</p></li>
</ul>
</div>
<div id="автоматизация-вычисления-коэффициента-относительной-извилистости-оценка-морфологического-соответствия" class="section level3 unnumbered">
<h3>Автоматизация вычисления коэффициента относительной извилистости (оценка морфологического соответствия)</h3>
<p>Создайте новый инструемнт Python Toolbox <em>Sinuosity</em>, модифицировав инструмент генерализации, созданный ранее для алгоритма Ли-Оупеншоу. Вам необходимо внутри каждого квадрата поделить длину исходной линии на длину отрезка, соединяющего точки пересечения с линиями сетки. А затем посчитать среднее из полученных значений (<strong>Summary Statistics</strong>).</p>
</div>
<div id="отчет-2" class="section level3 unnumbered">
<h3>Отчет</h3>
<p>Опишите ваш опыт разработки инструментов оценки геометрической точности и морфологического соответствия для линий. Сопроводите данный раздел отчета снимками экрана и примерами получаемых результатов</p>
</div>
</div>
<div id="часть-3.-сравнение-алгоритмов-ли-оупеншоу-ванга-мюллера-дугласа-пейкера-и-висвалингам-уайатта" class="section level2 unnumbered">
<h2>Часть 3. Сравнение алгоритмов Ли-Оупеншоу, Ванга-Мюллера, Дугласа-Пейкера и Висвалингам-Уайатта</h2>
<p>Сравните результаты работы вашего инструмента и инструмента <strong>Simplify Line</strong> в режимах BEND_SIMPLIFY (алгоритм Ванга-Мюллера), POINT_REMOVE (алгоритм Дугласа-Пейкера) и WEIGHTED_AREA (алгоритм Висвалингам-Уайатта).</p>
<ol style="list-style-type: decimal">
<li><p>Используя шаг сетки, равный 2 мм в результирующем масштабе (<em>1:4 000 000</em>), упростите линию с помощью метода Ли-Оупеншоу.</p></li>
<li><p>Подберите параметры алгоритмов Дугласа-Пейкера, Ванга-Мюллера и Висвалингам-Уайатта таким образом, чтобы количество результирующих точек в линиях было примерно равно (±5%) количеству точек после генерализации методом Ли-Оупеншоу. Выпишите эти параметры в отчет. Для подсчета количества точек используйте инструмент <strong>Feature Vertices to Points</strong></p></li>
<li><p>Рассчитайте модифицированное Хаусдорфово расстояние от оригинальной линии для четырех полученных результатов генерализации</p></li>
<li><p>Рассчитайте коэффициент относительной извилистости в исходном и результирующем масштабе, используя шаг сетки 5-7 мм в масштабе карты.</p></li>
<li><p>Сведите в одну таблицу параметры инструментов, а также рассчитанные величины MHD и коэффициента относительной извилистости по каждому алгоритму.</p></li>
<li><p>Оцените алгоритмы по следующим критериям:</p>
<ol style="list-style-type: lower-alpha">
<li><p>При каких параметрах инструментов количество результирующих узлов линий одинаково?</p></li>
<li><p>Модоифицированное хаусдорфово расстояние. Насколько эффективно алгоритм использует точки? Какой из алгоритмов дает контур, наиболее близко повторяющий исходную кривую?</p></li>
<li><p>Относительная извилистость. Насколько сглаженным/угловатым получается изображение? Какой из алгоритмов дает значение извилистости более близкое к оригиналу?</p></li>
<li><p>Какой метод на ваш взгляд дает наиболее удовлетворительные результаты с точки зрения принципов картографической генерализации и лучше передает морфологию объектов?</p></li>
</ol></li>
<li><p>Сделайте для отчета 4 иллюстрации с мини-легендой, на каждой из которых показан исходный контур и поверх — его генерализованная версия (по иллюстрации на каждый алгоритм). Разные алгоритмы выделите разными цветами.</p></li>
<li><p>Изложите в отчете свой опыт сравнительного анализа алгоритмов генерализации.</p></li>
</ol>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Douglas:1973if" class="csl-entry">
Douglas, D. H., and T. K. Peucker. 1973. <span>“Algorithms for the Reduction of the Number of Points Required to Represent a Digitized Line or Its Caricature.”</span> <em>The Canadian Cartographer</em>, no. 10(2): 112–22.
</div>
<div id="ref-Li:1992jg" class="csl-entry">
Li, Zhilin, and Stan Openshaw. 1992. <span>“Algorithms for <span>Automated Line Generalization Based</span> on a <span>Natural Principle</span> of <span>Objective Generalization</span>.”</span> <em>International Journal of Geographical Information Systems</em> 6 (5): 373–89. <a href="https://doi.org/10.1080/02693799208901921">https://doi.org/10.1080/02693799208901921</a>.
</div>
<div id="ref-Visvalingam:1993hx" class="csl-entry">
Visvalingam, M, and J D Whyatt. 1993. <span>“Line <span>Generalisation</span> by <span>Repeated Elimination</span> of <span>Points</span>.”</span> <em>The Cartographic Journal</em> 30 (1): 46–51. <a href="https://doi.org/10.1179/caj.1993.30.1.46">https://doi.org/10.1179/caj.1993.30.1.46</a>.
</div>
<div id="ref-Wang:1998eh" class="csl-entry">
Wang, Zeshen, and Jean-Claude Müller. 1998. <span>“Line <span>Generalization Based</span> on <span>Analysis</span> of <span>Shape Characteristics</span>.”</span> <em>Cartography and Geographic Information Science</em> 25 (1): 3–15. <a href="https://doi.org/10.1559/152304098782441750">https://doi.org/10.1559/152304098782441750</a>.
</div>
<div id="ref-zhou:2005" class="csl-entry">
Zhou, Sheng, and Christopher B Jones. 2005. <span>“Shape-<span>Aware Line Generalisation With Weighted Effective Area</span>.”</span> In <em>Developments in <span>Spatial Data Handling</span></em>, 12. <span>Berlin, Heidelberg</span>: Springer.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="points-clust-work.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lines-network-work.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"edit": "https://github.com/tsamsonov/gen-course/edit/master/%s"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
